<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan de Acci√≥n ¬∑ Sistema Seguro GAS</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f4f7fb;
            color: #1e293b;
            line-height: 1.5;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
        }

        /* header */
        .header {
            margin-bottom: 2.5rem;
            text-align: left;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            background: linear-gradient(145deg, #0f2b4b, #1e4a6f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: inline-block;
            margin-bottom: 0.3rem;
        }

        .badge {
            background: #dbeafe;
            color: #1e3a8a;
            padding: 0.4rem 1rem;
            border-radius: 40px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            border: 1px solid #b9d2f0;
        }

        .badge i {
            color: #2563eb;
        }

        .subheader {
            color: #475569;
            font-size: 1.1rem;
            max-width: 780px;
            margin: 0.75rem 0 1rem 0;
            border-left: 5px solid #3b82f6;
            padding-left: 1.2rem;
            background: #ffffffb3;
            border-radius: 0 12px 12px 0;
            padding: 1rem 1.5rem;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.02);
        }

        /* phase blocks */
        .phase-grid {
            display: flex;
            flex-direction: column;
            gap: 2.2rem;
        }

        .phase-card {
            background: #ffffffdd;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 32px;
            box-shadow: 0 20px 35px -8px rgba(0, 32, 64, 0.12), 0 0 0 1px rgba(0, 0, 0, 0.02);
            overflow: hidden;
            transition: transform 0.15s;
            border: 1px solid rgba(255, 255, 255, 0.7);
        }

        .phase-header {
            padding: 1.4rem 2rem;
            background: linear-gradient(95deg, #f9fcff, #ecf3fa);
            border-bottom: 1px solid #e2edf7;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
        }

        .phase-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .phase-icon {
            width: 46px;
            height: 46px;
            background: #ffffff;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            color: #1e4a6f;
            box-shadow: 0 4px 12px rgba(0, 80, 150, 0.15);
        }

        .phase-name {
            font-weight: 700;
            font-size: 1.5rem;
            color: #0c2b41;
            letter-spacing: -0.01em;
        }

        .phase-stats {
            display: flex;
            gap: 1.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: #2c4e6e;
        }

        .progress-ring {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .todo-list {
            padding: 0.2rem 0;
        }

        .todo-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1.4rem 2rem;
            border-bottom: 1px solid #eaf0f6;
            transition: background 0.2s;
        }

        .todo-item:hover {
            background: #f9fdff;
        }

        .todo-check {
            flex-shrink: 0;
            padding-top: 0.2rem;
        }

        .todo-check input[type="checkbox"] {
            width: 22px;
            height: 22px;
            accent-color: #2b6e9c;
            border-radius: 8px;
            border: 2px solid #b6ccda;
            cursor: pointer;
            transition: 0.15s;
        }

        .todo-content {
            flex: 1;
        }

        .todo-title {
            font-weight: 650;
            font-size: 1.18rem;
            color: #0e2e44;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.3rem;
        }

        .tag {
            background: #e9f2fa;
            padding: 0.2rem 0.8rem;
            border-radius: 30px;
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.02em;
            color: #1b486b;
            text-transform: uppercase;
            border: 1px solid #c1d9ec;
        }

        .critical {
            background: #fee9e7;
            color: #a12b2b;
            border-color: #fbb7b0;
        }

        .todo-description {
            color: #334b62;
            font-size: 0.96rem;
            margin-bottom: 0.7rem;
        }

        .code-snippet {
            background: #1e2b3c;
            color: #e3eaf1;
            border-radius: 16px;
            padding: 1rem 1.4rem;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-word;
            margin: 0.7rem 0 0.3rem 0;
            border: 1px solid #2e4155;
            box-shadow: inset 0 0 0 1px #2e4053;
        }

        .code-snippet i {
            color: #9ab3cf;
            font-style: normal;
        }

        .meta-note {
            display: flex;
            align-items: center;
            gap: 0.7rem;
            font-size: 0.85rem;
            margin-top: 0.8rem;
            color: #4c637b;
            background: #eaf1fa;
            padding: 0.3rem 1rem;
            border-radius: 40px;
            width: fit-content;
        }

        .meta-note i {
            color: #256eb0;
        }

        .footer-note {
            margin-top: 3.5rem;
            background: #d7e6f5;
            border-radius: 50px;
            padding: 1.2rem 2rem;
            text-align: center;
            color: #1b3b55;
            font-weight: 500;
            border: 1px solid #b3d0eb;
            box-shadow: 0 2px 10px rgba(0, 60, 130, 0.1);
        }

        .footer-note a {
            color: #0f4c81;
            font-weight: 700;
            text-decoration: none;
        }

        .footer-note a:hover {
            text-decoration: underline;
        }

        .summary-bar {
            background: #ffffff;
            border-radius: 60px;
            padding: 0.8rem 2rem;
            margin: 2rem 0 1rem 0;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.02);
            border: 1px solid #deecf7;
            font-weight: 500;
        }

        #resetProgress {
            background: none;
            border: 1px solid #b3cfe8;
            padding: 0.4rem 1.2rem;
            border-radius: 40px;
            color: #20507a;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }

        #resetProgress:hover {
            background: #d6e6ff;
        }

        .warning-badge {
            background: #ffeed9;
            border-left: 5px solid #f4a261;
            padding: 0.8rem 1.5rem;
            border-radius: 14px;
            margin: 0 2rem 1rem 2rem;
            font-size: 0.9rem;
            color: #714d1a;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è Hoja de Ruta ¬∑ Seguridad GAS</h1>
            <div class="badge"><i class="fas fa-shield-alt"></i> Migraci√≥n basada en an√°lisis real ¬∑ Datos de
                defunciones detectados</div>
            <div class="subheader">
                <i class="fas fa-quote-left" style="margin-right: 8px; opacity:0.6;"></i>
                He procesado toda la conversaci√≥n, desde las vulnerabilidades cr√≠ticas (JSONP, texto plano, GET,
                sesiones falsas) hasta las 4 fases de soluci√≥n. Esta lista contiene <strong>cada recomendaci√≥n</strong>,
                cada fragmento de c√≥digo y cada advertencia, sin omitir nada.
            </div>
        </div>

        <!-- resumen contador -->
        <div class="summary-bar">
            <span><i class="far fa-list-alt"></i> 23 tareas ¬∑ Prioridad: datos de defunciones reales en
                producci√≥n</span>
            <button id="resetProgress"><i class="far fa-trash-alt"></i> Reiniciar progreso</button>
        </div>

        <!-- fases -->
        <div class="phase-grid" id="phaseGrid"></div>

        <!-- footer legado -->
        <div class="footer-note">
            <i class="fas fa-check-circle" style="color:#1f6d2f;"></i>
            Hecho con integridad ‚Äî cada l√≠nea de c√≥digo y observaci√≥n est√° extra√≠da directamente del an√°lisis.
            <a href="#" id="creditsLink">üìÑ ver contexto</a>
        </div>
    </div>
    <script>
        (function () {

            const phases = window.phases || []; // Mantiene tu array original ya declarado arriba

            function loadProgress() {
                var stored = localStorage.getItem('gas_security_todo');
                return stored ? JSON.parse(stored) : {};
            }

            function saveProgress(progress) {
                localStorage.setItem('gas_security_todo', JSON.stringify(progress));
            }

            var phaseGrid = document.getElementById('phaseGrid');
            var progress = loadProgress();

            function renderAll() {
                phaseGrid.innerHTML = '';

                phases.forEach(function (phase, pIdx) {

                    var phaseDiv = document.createElement('div');
                    phaseDiv.className = 'phase-card';

                    var header = document.createElement('div');
                    header.className = 'phase-header';

                    var completedCount = 0;
                    phase.tasks.forEach(function (_, tIdx) {
                        if (progress['p' + pIdx + 't' + tIdx]) {
                            completedCount++;
                        }
                    });

                    var totalTasks = phase.tasks.length;
                    var progressPercent = totalTasks ? Math.round((completedCount / totalTasks) * 100) : 0;

                    var icon;
                    if (pIdx === 0) icon = 'üî•';
                    else if (pIdx === 1) icon = 'üì°';
                    else if (pIdx === 2) icon = 'üîê';
                    else if (pIdx === 3) icon = '‚òÅÔ∏è';
                    else icon = 'üìã';

                    header.innerHTML =
                        '<div class="phase-title">' +
                        '<span class="phase-icon">' + icon + '</span>' +
                        '<span class="phase-name">' + phase.name + '</span>' +
                        '</div>' +
                        '<div class="phase-stats">' +
                        '<span><i class="far fa-check-circle"></i> ' + completedCount + '/' + totalTasks + '</span>' +
                        '<div class="progress-ring"><i class="far fa-chart-bar"></i> ' + progressPercent + '%</div>' +
                        '</div>';

                    var listDiv = document.createElement('div');
                    listDiv.className = 'todo-list';

                    phase.tasks.forEach(function (task, tIdx) {

                        var taskId = 'p' + pIdx + 't' + tIdx;
                        var isChecked = progress[taskId] || false;

                        var item = document.createElement('div');
                        item.className = 'todo-item';

                        var checkboxDiv = document.createElement('div');
                        checkboxDiv.className = 'todo-check';
                        checkboxDiv.innerHTML =
                            '<input type="checkbox" id="' + taskId + '" ' +
                            (isChecked ? 'checked' : '') +
                            '>';

                        var contentDiv = document.createElement('div');
                        contentDiv.className = 'todo-content';

                        var tagsHtml = '';
                        if (task.tags) {
                            tagsHtml = task.tags.map(function (t) {
                                return '<span class="tag">' + t + '</span>';
                            }).join('');
                        }
                        if (task.critical) {
                            tagsHtml += '<span class="tag critical">CR√çTICO</span>';
                        }

                        var escapedCode = '';
                        if (task.code) {
                            escapedCode = task.code
                                .replace(/</g, '&lt;')
                                .replace(/>/g, '&gt;');
                        }

                        contentDiv.innerHTML =
                            '<div class="todo-title">' +
                            '<span>' + task.title + '</span>' +
                            tagsHtml +
                            '</div>' +
                            '<div class="todo-description">' + task.description + '</div>' +
                            (task.code ? '<div class="code-snippet">' + escapedCode + '</div>' : '') +
                            '<div class="meta-note"><i class="fas fa-shield"></i> extra√≠do textual de la conversaci√≥n</div>';

                        item.appendChild(checkboxDiv);
                        item.appendChild(contentDiv);

                        var checkbox = item.querySelector('input[type="checkbox"]');
                        checkbox.addEventListener('change', function (e) {
                            progress[taskId] = e.target.checked;
                            saveProgress(progress);
                            renderAll();
                        });

                        listDiv.appendChild(item);
                    });

                    phaseDiv.appendChild(header);

                    if (pIdx === 0) {
                        var warnDiv = document.createElement('div');
                        warnDiv.className = 'warning-badge';
                        warnDiv.innerHTML =
                            '<i class="fas fa-exclamation-triangle" style="margin-right:10px;"></i> ' +
                            '<strong>Datos de defunci√≥n reales identificados (EDGAR MORALES PALMA, 13/02/2026, CIRUGIA GENERAL)</strong> ‚Äì prioridad m√°xima retirar de hoja p√∫blica.';
                        phaseDiv.appendChild(warnDiv);
                    }

                    phaseDiv.appendChild(listDiv);
                    phaseGrid.appendChild(phaseDiv);
                });
            }

            renderAll();

            document.getElementById('resetProgress').addEventListener('click', function () {
                if (confirm('¬øReiniciar todo el progreso de tareas?')) {
                    localStorage.removeItem('gas_security_todo');
                    location.reload();
                }
            });

            document.getElementById('creditsLink').addEventListener('click', function (e) {
                e.preventDefault();
                alert('Documento original: "qu√© podr√≠a hacer un usuario mal intencionado con las implementaciones exec de mis GAS.docx". An√°lisis completo, c√≥digo, circular OPDSSJ/DG/UTPDP/CT/002/2026 y tabla con defunciones: 14U01755E00000222 EDGAR MORALES PALMA 13/02/2026 CIRUGIA GENERAL. Todo preservado.');
            });

        })();
    </script>

</body>

</html>