<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>游댢 Gu칤a Pr치ctica Paso a Paso para Corregirlo </title>
</head>

<body>
    <div class="container">
        <h1>游댢 Gu칤a Pr치ctica Paso a Paso para Corregirlo</h1>
        <div class="paso">
            <h2>1. Reescribe el Cliente (HTML/JS) para usar google.script.run:</h2>
            <pre>
                // 1. En tu HTML, carga la API de Google
<script src="https://accounts.google.com/gsi/client"></script>
<script src="https://apis.google.com/js/api.js"></script>

// 2. En tu login.js, implementa Google Sign-In
function handleCredentialResponse(response) {
    // response.credential es el JWT de Google
    google.script.run
      .withSuccessHandler(function(rolDelServidor) {
          // Login exitoso. El servidor nos devuelve el rol.
          redirigirSegunRol(rolDelServidor);
      })
      .withFailureHandler(function(error) {
          // Login fallido (email no autorizado)
          mostrarError("Acceso denegado. No est치s en la lista.");
      })
      .procesarLoginGoogle(response.credential); // Esta funci칩n est치 en tu GAS.
}

// 3. Bot칩n de Google en tu HTML
<div id="g_id_onload"
     data-client_id="TU_CLIENT_ID_DE_GOOGLE_CLOUD"
     data-callback="handleCredentialResponse">
</div>
<div class="g_id_signin" data-type="standard"></div>

            </pre>
        </div>
    </div>
</body>

</html>